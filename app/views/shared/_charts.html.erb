<% content_for :head do %>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<% end %>

<div class="container mx-auto px-4" data-controller="chart">
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <!-- Bar Chart Card -->
    <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-lg font-medium text-gray-900">Spending Breakdown</h2>
        <div class="flex gap-3">
          <select data-chart-target="barGroupBy"
                  class="w-32 text-gray-900 rounded-md border-gray-200 text-sm">
            <option value="category">Category</option>
            <option value="country">Country</option>
            <option value="currency">Currency</option>
            <option value="merchant">Merchant</option>
          </select>
          <select data-chart-target="barAggregate"
                  class="w-32 text-gray-900 rounded-md border-gray-200 text-sm">
            <option value="sum">Total</option>
            <option value="count">Count</option>
            <option value="avg">Average</option>
          </select>
        </div>
      </div>
      <div class="h-[400px] relative">
        <canvas data-chart-target="barChart"></canvas>
      </div>
    </div>

    <!-- Doughnut Chart Card -->
    <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-lg font-medium text-gray-900">Distribution</h2>
        <select data-chart-target="doughnutGroupBy"
                class="w-32 text-gray-900 rounded-md border-gray-200 text-sm">
          <option value="category">Category</option>
          <option value="country">Country</option>
          <option value="merchant">Merchant</option>
        </select>
      </div>
      <div class="flex flex-col items-center">
        <div class="relative w-full max-w-[350px] h-[350px]">
          <canvas data-chart-target="doughnutChart"></canvas>
        </div>
        <div class="mt-4 text-center">
          <span data-chart-target="doughnutTotal" class="text-xl font-semibold text-gray-900"></span>
          <p class="text-sm text-gray-500">Total Expenses</p>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  :root {
    --primary: #4F46E5;
    --primary-light: rgba(79, 70, 229, 0.1);
  }

  body {
    font-family: 'Inter', sans-serif;
  }

  canvas {
    max-height: 100% !important;
  }
</style>
