<% content_for :head do %>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<% end %>

<div class="w-full"
     data-controller="chart"
     data-total-spent="<%= @total_spent %>"
     data-total-payments="<%= Current.user.transactions.where("amount < 0").sum(:amount).abs %>">
  <%# <div class="grid grid-cols-1 lg:grid-cols-1 gap-6"> %>
    <!-- Bar Chart Card -->
    <%# <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-lg font-medium text-gray-900">Spending Breakdown</h2>
        <div class="flex gap-3">
          <select data-chart-target="barGroupBy"
                  class="w-32 text-gray-900 rounded-md border-gray-200 text-sm">
            <option value="category">Category</option>
            <option value="country">Country</option>
            <option value="currency">Currency</option>
            <option value="merchant">Merchant</option>
          </select>
          <select data-chart-target="barAggregate"
                  class="w-32 text-gray-900 rounded-md border-gray-200 text-sm">
            <option value="sum">Total</option>
            <option value="count">Count</option>
            <option value="avg">Average</option>
          </select>
        </div>
      </div>
      <div class="h-[400px] relative">
        <canvas data-chart-target="barChart"></canvas>
      </div>
    </div> %>

    <!-- Line Chart Card -->
    <div class="bg-transparent rounded-xl shadow-sm px-6 py-4 border border-gray-100 w-full">
      <div class="flex flex-col items-center w-full">
        <div class="relative w-full h-[320px] md:h-[350px] lg:h-[400px] text-slate-200">
          <canvas data-chart-target="lineChart"></canvas>
        </div>
        <div class="mt-3 text-center">
          <p class="text-sm text-slate-200">Total Spent vs Payments</p>
        </div>
      </div>
    </div>
  <%# </div> %>
</div>

<style>
  :root {
    --primary: #4F46E5;
    --primary-light: rgba(79, 70, 229, 0.1);
  }

  body {
    font-family: 'Inter', sans-serif;
  }

  canvas {
    max-height: 100% !important;
    width: 100% !important;
  }
</style>
